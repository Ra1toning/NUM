# Зэрэглэлт дараалал
![GitHub Classroom Workflow](../../workflows/GitHub%20Classroom%20Workflow/badge.svg?branch=main) ![Points badge](../../blob/badges/.github/badges/points.svg)

Зэрэглэлт дараалал гэдэг нь зэрэглэлээрээ хамгийн чухал нь түрүүлж гарах дарааллыг хэлнэ. Харин энгийн дараалалд хамгийн түрүүнд орсон нь гардаг. Уг даалгавраар зэрэглэлт дарааллыг `Heap` бүтэц ашиглан, дараах бодлогын хувьд хэрэгжүүлнэ.

## Даалгаврыг хийх заавар

`n` ширхэг команд орж ирнэ. Команд нь дараах хоёрын аль нэг байна.
  * `PUT <msg> <p>`: Зэрэглэлт дараалалд `p` зэрэглэлтэй, `msg` зурвасыг оруулна.
  * `GET`: Зэрэглэлт дарааллаас хамгийн чухал зурвасыг гаргаж зурвасыг хэвлэнэ.
  
Зурвасын чухлын дараалал нь:
  1. Зэрэглэл нь бага бол хамгийн чухал
  2. Зэрэглэл тэнцүү бол орсон дарааллаараа түрүүнд орсон нь чухал байна.

Жишээ нь `n = 9` дараах оролт орж ирсэн бол 
```
9
PUT BRiz9JZB7uW0R1OF 47836
PUT CAA8gG 5516
PUT 9J 12389
PUT lKr 6861
PUT BlUCAWYQfFfpNnx34 78065
PUT OlxgTgyKknIu 91628
PUT hIc5vpljC 93147
GET
GET
```
харгалзах гаралт нь
```
CAA8gG
lKr
```
байна. **Тайлбар:** Эхний 7 команд нь бүгд оруулах команд тул зэрэглэлт дараалалд хадгална. 8 дахь команд нь гаргах команд тул дараалалд орсон зурвасуудаас хамгийн чухлыг нь буюу `CAA8gG`-г дарааллаас гаргана. 9 дахь команд ахиад гаргах үйлдэл тул одоо зэрэглэлт дараалалд байгаа зурвасууд дундаас хамгийн чухал болох `lKr`-г дарааллаас гаргана.

## Хэрэгжүүлэлт

Уг даалгавраар бид heap бүтцэд зурвас хадгалах болно. Зурвас дараах өгөгдлийг агуулна.

| Зурвас   |
|:--------:|
| Текст    |
| Зэрэглэл |
| Хугацаа  |

Дээрх талбаруудыг агуулсан зурвасыг хадгалахдаа дараах бүтцийг ашиглана. 
```C
struct Msg {
        char text[100];
        int priority;
        int time;
};
typedef struct Msg Msg;
```

Heap бүтэц бол хоёртын бүтэн мод тул зурвасуудыг бид хүснэгтэд хадгалах болно. Хүснэгтэд хадгалахын тулд дараах бүтцийг ашигласан.
```C
struct Array {
        Msg a[100000];
        int len;
};
```
`Array` бүтэц нь зурвасыг хадгалах хүснэгт, орсон зурвасуудын тоог хадгалах `len` хувьсагчаас тогтно.

Heap бүтэц бол үндсэндээ heap зарчмаар хадгалагдсан хүснэгт тул дараах бүтцээр хадгалж болно.
```C
struct Heap {
        struct Array heap;
};
typedef struct Heap Heap;
#define h_arr heap.a
#define h_len heap.len
```

`heap` нэртэй `Array` бол зурвасуудыг хадгалж болохоор хүснэгтийг дотроо агуулна. Уг даалгавраар хүснэгтэд хадгалагдсан зурвасуудад дараах байдлаар хандана.
```C
Heap hp;
Heap *p = &hp;
// ...
hp.h_arr[0].time = 0;
p->h_arr[1].priority = 3;
```

### Шаардагдах мэдлэг
  1. Бүтэц
  2. Хаяган хувьсагч
  3. Хүснэгт
  4. Хоёртын бүтэн мод
  
### Хэрэгжүүлэх функцүүд

  * Хоёр зурвасын чухлыг харьцуулах функц: `b` нь илүү чухал бол 1, бусад үед 0-ыг буцаах функц. Өөрөөр хэлбэл `a < b` үйлдэл юм.
    ```C
    int less(const Msg *a, const Msg *b);
    ```
  * Оруулах функц: heap зарчмаар чухлын дарааллыг баримтлан оруулна. Ингэхдээ хамгийн чухал зурвас heap-ын оройд хадгалагдана. `x` зурвасыг `p`-ын зааж буй heap бүтцэд оруулна.
    ```C
    void insert(Heap *p, const Msg x);
    ```
  * Heap бүтцийн swim үйлдэл: `k` нь swim үйлдлийг `p`-ын зааж буй heap дээр эхлүүлэх индекс.
    ```C
    static void swim(Heap *p, int k);
    ```
  * Heap бүтцийн sink үйлдэл: `k` нь sink үйлдлийг `p`-ын зааж буй heap дээр эхлүүлэх индекс.
    ```C
    static void sink(Heap *p, int k);
    ```
  * Оройн элементийг гаргах функц: `p`-ын зааж буй heap бүтцээс оройн элементийг гаргаад гарсан зурвасыг буцаана. Гаргасны дараа орой бүрийн хувьд heap зарчим хадгалах ёстой.
    ```C
    Msg delMin(Heap *p);
    ```
