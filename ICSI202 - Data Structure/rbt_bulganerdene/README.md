# Улаан, Хар Мод буюу тэнцвэрт мод
![GitHub Classroom Workflow](../../workflows/GitHub%20Classroom%20Workflow/badge.svg?branch=main) ![Points badge](../../blob/badges/.github/badges/points.svg)

Хаяган хувьсагч ашиглан Улаан хар тэнцвэрт модыг (ТМ) хэрэгжүүлнэ. ТМ-д оюутны мэдээлэл хадгалах бөгөөд оюутны ID-аар түлхүүр хийж хадгална.

Таны хэрэгжүүлэлт n = 100,000 буюу 100,000 ширхэг оюутны мэдээлэл оруулж, устгахад **2 секундад** амжих хийх ёстой.

**Даалгаврын хийхэд `NULL` хаягт хандвал үргэлж `segmentation fault` авахыг анхаарна уу!**

## Даалгаврыг хийх заавар

`n` ширхэг команд орж ирнэ. Команд нь дараах хоёрын аль нэг байна.
  * `PUT нэр id нас дүн`: УХТМ-д уг оюутны мэдээллийг оруулна. **Адилхан `id`-тай оюутан олдвол тэр оюутны мэдээллийг шинэчлэн өөрчилнө.**
  * `GET id`: УХТМ-оос оюутны `id`-аар хайж оюутны мэдээллийг хэвлэнэ. Оюутны мэдээллийг хэвлэхдээ нэг шинэ мөрөнд нэр, id, нас, голч гэсэн дарааллаар нэг хоосон зайгаар тусгаарлан хэвлэнэ. Голчыг даслалаас хойш 1 оронгийн нарийвчлалтайгаар хэвлэнэ. Олдохгүй бол `None` гэж хэвлэнэ. Хэвлэх үйлдлийг `print` функцийг дуудаж шийдэж болно.
  * `DEL id`: УХТМ-оос оюутны `id`-аар хайж оюутны мэдээллийг модноос гаргана.
  
Жишээ нь `n = 8` дараах оролт орж ирсэн бол 
```
7
PUT Bat A001 15 90.5
PUT Dorj A002 20 95.3
PUT Bold A003 21 70.0
GET A002
PUT Dulam A002 18 98.0
GET A001
GET A002
```
харгалзах гаралт нь
```
Dorj A002 20 95.3
Bat A001 15 90.5
Dulam A002 18 98.0
```

## Ерөнхий файл
`DS.h` нь бүтцийн ерөнхий толгой файл. Уг файл дотор хэрэгжүүлэх функцүүд зарлагдсан байна.

## Даалгаврыг хийх заавар

Энэ даалгаврыг хийхэд шаардлагатай мэдлэг:
  1. Си хэлний бүтэц (struct)
  2. Си хэлний хаяган хувьсагч, дам хандалтын ойлголт (pointer, dereference)
  3. Динамикаар санах ой хуваарилах `malloc` функц, чөлөөлөх `free` функц
  
Модны орой бүр дараах мэдээллийг агуулна.

| Elm    |
|:------:|
| x      |
| color  |
| *L     |
| *R     |
|        |

  * `x`: Тухайн оройд хадгалагдах оюутны мэдээлэл.
  * `color`: Тухайн орой эцэгтэйгээ холбогдох хэлбэр буюу өнгийг хадгална.
  * `*L`: Зүүн хүүхдийн хаягийг заах хаяган хувьсагч. Өөрөөр хэлбэл зүүн дэд модны хаяг гэж ойлгож бас болно.
  * `*R`: Баруун хүүхдийн хаягийг заах хаяган хувьсагч. Өөрөөр хэлбэл баруун дэд модны хаяг гэж ойлгож бас болно.

Модны орой бүрийн хадгалах, эдгээр мэдээллийг 
```C
struct Elm {
        Student x;
        int color;
        struct Elm *L;
        struct Elm *R;
};
typedef struct Elm Elm;
```
бүтцэд хадгална. Тухайн оройн зүүн баруун, хүүхэдгүй бол L, R хаяган хувьсагчууд нь `NULL` хаягийг хадгалах ёстой. 

Тэнцвэрт Модыг хадгалахад модны үндэс оройг заах ганц хаяган хувьсагч хэрэгтэй. Үүнийг 
```C
struct RBT {
        Elm *root;
};
```
бүтцэд хадгалах болно. Хэрэгжүүлэх функцүүд нь `RBT` бүтцийн хаягийг хүлээн авах ба дотор нь модны үндэс хадгалагдсан тул модны бүх элементийг үндсээс нь хөөн хандах боломжтой.

### Функцүүдийг хэрэгжүүлэх заавар
Функцүүдийг хэрэгжүүлэхдээ модны үндсийг хадгалах `RBT` бүтцэн хувьсагчийн хаягийг хүлээн авах ба түүний модны үндсийг хадгалах `root` хувьсагчаас хөөн бусад гишүүдэд хандана.

Өөрийн хэрэглэх функцүүдийг хүссэнээрээ зарлан ашиглах боломжтой. Жишээ нь оруулах үйлдлийг лекц дээр үзсэнээр дараах байдлаар хэрэгжүүлэх боломжтой.
```C
void rb_put(RBT *ptree, const Student *px)
{
    ptree->root = insert1(ptree->root, px);
    // эсвэл
    insert2(ptree->root, x, NULL);
}
```

Оюутны мэдээлэл нь хэд хэдэн өгөгдөлтэй том бүтэц учраас утгаар дамжуулахаас зайлсхийж хаягаар өгөгдлийг дамжуулсан тул оруулах газарт утгыг дараах байдлаар оноож өгөх боломжтой.
```C
void rb_put(RBT *ptree, const Student *px) 
{
 //...
    Elm *q = malloc(sizeof(Elm));
    q.x = *px;
	// эсвэл
	strcpy(q.x.name, px->name);
	strcpy(q.x.id, px->id);
	q.x.age = px->age;
	q.x.gpa = px->gpa;
 //...
}
```

### Хэрэгжүүлэх функцүүд

  * Жиших функц: `a`, `b` оюутныг `id`-аар цагаан толгойн дарааллаар жишиж `a` нь бага бол 1, үгүй бол 0-ийг буцаах функц.
    ```C
    int less(const Student *a, const Student *b);
    ```

  * Оруулах функц: ТМнд `px` хаягт хадгалагдсан оюутны мэдээллийг оруулна. Оруулахдаа УХТМны зарчмаар оруулна. Жишилтийг `less` функцийг ашиглан оюутны `id`-аар жишиж оруулна.
    ```C
    void rb_put(RBT *ptree, const Student *px);
    ```

  * Хайх функц: УХТМноос `id`-аар хайн олдсон оройн `Elm*` хаягийг буцаана. Олдохгүй бол `NULL` хаягийг буцаана. 
    ```C
    Elm *rb_get(const RBT *ptree, const char id[]);
    ```
    
  * Устгах функц: ТМноос `id`-аар хайж олоод устгана. Олдохгүй бол юу ч хийхгүй. 
    ```C
    void rb_del(RBT *ptree, const char id[]);
    ```
